@using RevenuePlanner.Helpers
@using System.Configuration
@{
    var _isDisplayLayout = "";
    
    if (Convert.ToString(ConfigurationManager.AppSettings["ShowBookmark"]) != null)
    {
        _isDisplayLayout = "yes";
    }
    else
    {
        _isDisplayLayout = "no";
    }
    
}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>@ViewBag.Title</title>
    <link rel="shortcut icon" href="@Url.Content("~/Content/images/favicon.png")">
    <meta name="viewport" content="width=device-width" />
    <meta name="robots" content="noindex">

    @Styles.Render("~/Content/css/GetCSSForLogin")



    @Scripts.Render("~/bundles/GetJSForLogin")
    <script type="text/javascript">
    //Added By: Rahul Shah on 25/09/2015 to address ticket PL #900 Exception handling in client side scripting
    //Summary: Added reference of script file and also initialize the javaScript variable 'logErrorUrl' so that errorhandler.js knows
    var logErrorUrl = '@Url.Action("LogJavaScriptError", "Error")';
    </script>
    <script src="@Url.Content("~/Scripts/js/errorhandler.js")" type="text/javascript"></script>
    @*Add By Nishant Sheth #1796*@
    <script src="@Url.Content("~/Scripts/js/bootstrap-notify.min.js")"></script>
</head>
<body class="gradient">
    @* Start - Added by :- Sohel Pathan on 22/05/2014 for PL #469 *@
    <style type="text/css">
        .icon-info-support
        {
            width: 300px;
        }
    </style>
    @* End - Added by :- Sohel Pathan on 22/05/2014 for PL #469 *@
    <div class="container-fluid all-height">

        <div class="row-fluid">
            <div id="header" class="span12">
              @*  <div class="hive9-logo"></div>*@
                <span class="title source-sans-prolight" style="margin-left: 12px;">@Sessions.ApplicationName</span> @*changed - added by uday #559*/*@
                <div class="mrp-logo"></div>
            </div>
        </div>
        @*PL#1441 added by dashrath Prajapti*@
        <div class="login-header" id="_loginLayout">
            <img src="~/Content/images/infoGamePlan-Icon.png">
            <p>We recently moved to a new web host, <a href="https://gameplan.hive9.com/" target="_blank">gameplan.hive9.com</a>. Please remember to update your bookmark. </p>
        </div>
        @*<div class="row-fluid calc-height">*@
        <div class="row-fluid calc-height-login">


            <div class="span12">
                <div id="errorMessage" class="alert alert-error hide">
                    <a class="close">×</a>
                    <strong>Error!</strong>
                    <div id="cErrors">@Html.ValidationSummary(true)</div>
                </div>
                <div id="TimeOuterrorMessage" class="alert alert-error hide" style="float: left; margin-left: 200px; width: 70%; margin-top: 5px; border: 1px solid;">
                    <a class="close">×</a>
                    <strong style="float: left;">Timed out.</strong>
                    <div id="timeOutcErrors" style="float: left; width: 470px;">&nbsp;You were logged out of Plan<sup>TM</sup> due to inactivity. Please log in again.</div>
                </div>
                <div class="login-wrapper">
                    @RenderBody()

                    <div class="icon-info-support conv_helveticaltstd-light">

                        <a href="#" id="ContactSupport">
                            <div class="support-icon"></div>
                            Contact Support</a>
                        @* Start - Added by :- Pratik Chauhan on 22/09/2014 for PL ticket #468 to display maintenance page *@
                        @if (!@Common.IsOffline)
                        {

                            <br />
                            @Sessions.ApplicationName @Html.Raw(" Release [")@ViewBag.ApplicationReleaseVersion@Html.Raw("]")    @* Modified by :- Sohel Pathan on 22/05/2014 for PL #469 to display release version from database *@
                        
                        }
                    </div>
                    @* End - Added by :- Pratik Chauhan on 22/09/2014 for PL ticket #468 to display maintenance page *@
                </div>
            </div>
        </div>
    </div>
    <div id="div_contactSupport"></div>
</body>
</html>
<script type="text/javascript">
     <!-- Hotjar -->
    (function (f, b) {
        var c;
        f.hj = f.hj || function () { (f.hj.q = f.hj.q || []).push(arguments) };
        f._hjSettings = { hjid: 14175, hjsv: 3 };
        c = b.createElement("script"); c.async = 1;
        c.src = "//static.hotjar.com/c/hotjar-14175.js?sv=3";
        b.getElementsByTagName("head")[0].appendChild(c);
    })(window, document);

    $.ajaxSetup({
        beforeSend: function (x) { //Called before every request
            myApp.showPleaseWait();
        },
        error: function (x, e) { // Called when error occured
            myApp.hidePleaseWait();
        }
    });
    $(document).ajaxStop(function () { //Called after every ajax request completed
        myApp.hidePleaseWait();
    });
    // Modify By Nishant Sheth 
    // Desc :: Reg to consist please wait dialog box with whole application #1796
    var myApp;
    var pleaseWaitDiv;
    myApp = myApp || (function () {
        return {
            showPleaseWait: function () {

                countplease = 0;
                var counter = $('[data-notify="container"]').length;
                if (counter == 0) {
                    pleaseWaitDiv = $.notify({
                    }, {
                        element: 'body',
                        type: "info",
                        allow_dismiss: false,
                        showProgressbar: true,
                        z_index: 2500,
                        delay: 1000,
                        animate: {
                            enter: 'animated fadeInDown',
                            exit: 'animated fadeOutUp'
                        },
                        icon_type: 'class',
                        template: '<div data-notify="container" class="span4 alert alert-{0} notify-load" role="alert">' +
                            '<button type="button" aria-hidden="true" class="close" data-notify="dismiss">×</button>' +
                            '<span data-notify="icon"></span> ' +
                            '<span data-notify="message"><strong>Loading...</strong></span>' +
                            '<div class="progress" data-notify="progressbar">' +
                                '<div class="progress-bar progress-bar-{0}" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;"></div>' +
                            '</div>' +
                        '</div>'
                    });
                }
            },
            hidePleaseWait: function () {
                //if (resp.state() === 'resolved') {
                if (true) {
                    countplease = countplease + 1;
                    //alert('resolved');
                    if (countplease == 1) {

                        pleaseWaitDiv.update({
                            'type': 'success',
                            'message': '<strong>Loaded Successfully...</strong>',
                        });
                    }

                } else {
                    //alert('continue');
                }

            },
        };
    })();
    var countplease = 0;
    // End by Nishant Sheth
    $(document).ready(function () {
            if ('@_isDisplayLayout' == "yes") {
                var _isTrue = '@Convert.ToString(ConfigurationManager.AppSettings["ShowBookmark"])';
                if (_isTrue == 'false') {
                    $("#_loginLayout").hide()
                }
                else {
                    $("#_loginLayout").show()
                }
              }
        
      
        $(".alert").find(".close").on("click", function (e) {
            e.stopPropagation();
            e.preventDefault();
            $(this).closest(".alert").slideUp(400);
        });

        $('#ContactSupport').click(function () {
            $("#div_contactSupport").empty();
            var url = '@Url.Content("~/Login/LoadSupportPartialOnLogin/")';     //// Modified by Sohel Pathan on 23/05/2014 for internal review points.
            $("#div_contactSupport").load(url);
        });

    });
</script>
