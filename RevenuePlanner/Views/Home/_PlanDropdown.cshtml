@model RevenuePlanner.Models.HomePlan
@using RevenuePlanner.Helpers;

<ul class="nav nav-tabs">
    <li class="title-header source-sans-proregular bold font-size25px">

        <form id="nl-form2" class="nl-form-plan-title without-margin plantitle" style="display:none;">

            <select id="dropdown-plan-title" data-default="0%" class="" maxlength="40">
                <script>
                    var plan = @Html.Raw(Json.Encode(Model.plans))
                    populateNF(plan, "dropdown-plan-title");
                </script>
            </select>
            <div class="nl-overlay"></div>
            <!--<div class="nl-overlay"></div>-->
            <script>
                var nlform = new NLForm(document.getElementById('nl-form2'));
            </script>

        </form>
        @*<h2 style="font-size: 29.5px;">Marketing Activites</h2>*@
    </li>
    @*<li>*@
         <div style="float: right;margin-bottom: 10px;">
                 @Html.Label("Fiscal Year:", new { id = "lblUpcoming_Activies" })
                <span class="selectBox" id="ddlUpComingActivitesSelectBox" style="width: 158px;">
                    @Html.DropDownList("ddlUpComingActivites", new SelectList((System.Collections.IEnumerable)ViewBag.ViewUpComingActivity, "Value", "Text"))
                </span>
                @Html.Label("View By:", new { id = "lblViewBy" })
                <span class="selectBox" id="ddlTabSelectBox" style="width: 158px;">
                    @Html.DropDownList("ddlTabViewBy", new SelectList((System.Collections.IEnumerable)ViewBag.ViewByTab, "Value", "Text", @RevenuePlanner.Helpers.PlanGanttTypes.Tactic.ToString()))
                </span>
            </div>
    @*</li>*@
    @*<li class="active pull-right">
        <a id="ATactics" href="#">Tactics</a>
    </li>
    <li class=" pull-right">
        <a id="AVertical" href="#">Vertical</a>
    </li>
    <li class=" pull-right">
        <a id="AStage" href="#">Stage</a>
    </li>
    <li class=" pull-right">
        <a id="AAudience" href="#">@Html.CustomLabelFor(Enums.CustomLabelCode.Audience)</a>
    </li>
    @if (Model.IsManager) 
    {
        <li class=" pull-right">
            <a id="ABusinessUnit" href="#">Business Unit</a>
        </li>
        <li class=" pull-right">
            <a id="ARequest" href="#">Requests
			<span id="RequestCount" class="label label-important"></span>
            </a>
        </li>
    }*@
</ul>
<script src="~/Scripts/js/scripts.js"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $(".selectBox select").selectbox();
        var Currenttime = $('#ddlUpComingActivites').val();
        isQuater = Currenttime;
        onClickPlanTitle();
        SetAttributeData();
        RefreshCurrentTab();
        if (activeMenu == '@Enums.ActiveMenu.Plan.ToString().ToLower()') {
            GetCollaborators(CurrentPlanId);
            $("#nl-form2").show();
        }
        else {
            $("#nl-form2").hide();
        }
        var SelectedPlans = filters.SelectedPlans.toString();
        GetHealderData(SelectedPlans);
        GetNumberOfActivityPerMonByPlanId(SelectedPlans, Currenttime);
    });

    $("#ddlTabViewBy").change(function () {
        RefreshCurrentTab();
    });


    $("#ddlUpComingActivites").change(function () {
        if (activeMenu == '@Enums.ActiveMenu.Plan.ToString().ToLower()') {
            PlanIds = CurrentPlanId;
        }
        if (filters.SelectedPlans.length > 0) {
            var PlanIds = filters.SelectedPlans.toString();
            Currenttime = $('#ddlUpComingActivites').val();
            isQuater = Currenttime;
            RefreshCurrentTab();
            GetHealderData(PlanIds);
            GetNumberOfActivityPerMonByPlanId(PlanIds, Currenttime);
        }
    });

</script>

