@model IEnumerable<RevenuePlanner.Models.IntegrationSelectionModel>
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
    string modelId = Convert.ToString(ViewBag.ModelId);
    ViewBag.ModelIdPartial = ViewBag.ModelId;//Added by Mitesh Vaishnav on 11/07/2014 for functional review point 49
    ViewBag.PageTitle = "Integration";//Added by Mitesh Vaishnav on 11/07/2014 for functional review point 49
    ViewBag.PageChildTitle = "IntegrationOverview";
    string ModelStatus = Convert.ToString(ViewBag.ModelStatus);
    string ModelTitle = Convert.ToString(ViewBag.ModelTitle);
    string ShowModelResultsTab = Convert.ToString(System.Configuration.ConfigurationManager.AppSettings["ShowModelResultsTab"]);
    int LatestModelID = Convert.ToInt32(ViewBag.LatestModelID);
    string BusinessUnitId = Convert.ToString(ViewBag.BusinessUnitId);
    @Html.Hidden("hdnShowModelResultsTab", ShowModelResultsTab);
                                                               string PublishedMsg = ViewBag.ModelPublishComfirmation;
    @Html.Hidden("PublishedMsg", PublishedMsg);
                                              bool PublisheStatus = ViewBag.Flag;
    @Html.Hidden("PublisheStatus", PublisheStatus);
                                                  var currentdate = System.DateTime.Today.ToShortDateString();
                                                  string IsViewEditBusinessUnit = Convert.ToString(ViewBag.IsViewEditBusinessUnit);
    @Html.Hidden("IsViewEditBusinessUnit", IsViewEditBusinessUnit);
                                                                  string IsOwner = Convert.ToString(ViewBag.IsOwner);
    @Html.Hidden("IsOwner", IsOwner);
}
@section Sidebar
{
    @Html.Partial("~/Views/Model/_model.cshtml")
}
<!--success message-->
@Html.Hidden("hdnMsg", (string)TempData["ErrorMessage"], new { id = "hdnMsg" })
@Html.HiddenFor(model => ModelStatus, new { id = "hdnStatus" })
@Html.Hidden("EffectiveDate", currentdate)
<input type="hidden" value="@ViewBag.ModelId" id="latestModelId" />
<div id="successMessage" class="alert hide alert-success message-position">
    <a class="close">×</a>
    <div id="cSuccess">@Html.Raw(HttpUtility.HtmlDecode((string)TempData["SuccessMessage"]))</div>
</div>
<div id="errorMessage" class="alert alert-error hide message-position">
    <a class="close">×</a>
    <div id="cError">@Html.Raw(HttpUtility.HtmlDecode((string)TempData["ErrorMessage"]))</div>
</div>
<div id="DivBackgroundModel" class="modal-backdrop fade in" style="z-index: 2000; display: none;"></div>
<div id="DivNoIntegrationModelPopup" class="form-inspect-share hide fade in" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display: none; height: 220px; z-index: 1502;">
    <h2 class="primary-title source-sans-prosemibold">No Integration Exists</h2>
    <p class="source-sans-prosemi" style="font-weight: normal; color: #FFFFFF; font-size: 17px; margin-bottom: 40px;">
        Gameplan syncs activities to existing external automation systems via API integration. To utilize this ability, you must add an integration.
    </p>
    <div style="width: 100%; margin: 0px auto;">
        <button class="form-inspect-share-button btn btn-large" id="Add-Integration" value="Submit" style="margin-top: 0px !important; margin-right: 10px; width: 80px;">Add Integration</button>
        &nbsp;
        <button class="btn-link" id="integration-cancel-button" type="button" style="margin-top: 0px !important; width: 80px; line-height: 41px;">Cancel</button>
    </div>
</div>
<div id="DivPublishModelPopup" class="form-inspect-share hide fade in" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display: none; height: 205px; z-index: 1502;">
    <h2 class="primary-title source-sans-prosemibold">Select effective date</h2>
    <div class="dp datepicker input-append date  calendar-width" id="dp_start" data-date="today();" data-date-format="@RevenuePlanner.Helpers.Common.dateFormat">
        <input id="t_startdate" class="black-border-right font-size13 height30px" style="background-color: #ffffff; border-color: #f3f3f3; color: #000000; width: 240px; margin-top: 0px; border-radius: 4px;" size="16" type="text">
        <span class="add-on height30" style="border-radius: 4px;">
            <img src="~/Content/images/gray-calendar-icon-big.png"></span>
    </div>
    <div style="width: 100%; margin: 0px auto;">
        <button class="form-inspect-share-button btn btn-large" id="Save-publish" value="Submit" style="margin-top: 0px !important; margin-right: 10px; width: 80px;">Save</button>
        &nbsp;
        <button class="btn-link" id="cancel-button" type="button" style="margin-top: 0px !important; width: 80px; line-height: 41px;">Cancel</button>
    </div>
</div>
<div class="padding-content cf source-sans-proregular">
    <ul class="nav nav-tabs" style="margin-bottom: 20px; padding-bottom: 10px;">

        <li class="title-header source-sans-proregular" title="@ViewBag.ModelTitle">
            <h2 id="lblTitle">@ViewBag.ModelTitle @ViewBag.ModelVersion <span class="gray source-sans-prolight" title="Published">@ViewBag.ModelStatus</span></h2>
        </li>
    </ul>
    <div class="row">
        @Html.Partial("~/Views/Model/_modelIntegration.cshtml")
        <div class="span10 content-colum-right">
            <table class="table table-striped table-hover myteam" id="userTable">
                <thead>
                    <tr>
                        <th title="Setup">Setup
                        </th>
                        <th title="Instance">Instance
                        </th>
                        <th title="Integration Type">Integration Type
                        </th>
                        <th title="Last Sync" style="width:21%;">Last Sync
                        </th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in Model)
                    {
                        <tr class="userRow">
                            <td title="@item.Setup">@item.Setup</td>
                            <td title="@item.Instance">@item.Instance</td>
                            <td title="@item.IntegrationType">@item.IntegrationType</td>
                            <td title="@item.LastSync">@item.LastSync</td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
        @Html.Partial("~/Views/Model/_DuplicateModel.cshtml")
</div>
<script type="text/javascript">
    var lastModelId = '@modelId';
    $(document).ready(function () {
        $("#content_wraper").removeClass("span10 all-height").addClass("span10 padding-top40");
    });
</script>

