!function (r) { r.fn.priceFormat = function (t) { var n = { prefix: "US$ ", suffix: "", centsSeparator: ".", thousandsSeparator: ",", limit: !1, centsLimit: 2, clearPrefix: !1, clearSufix: !1, allowNegative: !1, insertPlusSign: !1, isDouble: !1, isAllowNull: !1 }, t = r.extend(n, t); return this.each(function () { function n(r) { for (var t = "", n = 0; n < r.length; n++) char_ = r.charAt(n), char_ && char_.match(v) && (g ? t.length < g && (t += char_) : t += char_); return t } function i(r) { for (var t = "", n = 0; n < r.length; n++) char_ = r.charAt(n), char_ && char_.match(v) && (g ? t.length < g && (t += char_) : t += char_); return t } function e(r) { for (; r.length < b + 1;) r = "0" + r; return r } function a(t) { var a = !1; ("0" == t || "" != d && t == d + "0" || _ && t == "0" + _) && (a = !0); var f; O ? (f = e(i(t)), O = !1) : f = e(n(t)); var c = "", o = 0, u = t.split(".")[1]; u > 0 && (b = u.length + 1), 0 == b && (m = "", s = ""); var l, s = f.substr(f.length - b, b), h = f.substr(0, f.length - b), v = !1; if (C) if (-1 == h.indexOf(".")) v = !1; else { v = !0; var g = h; h = g.substr(0, g.indexOf(".")), l = g.substr(g.indexOf(".") + 1) } if (f = 0 == b ? h : h + m + s, p || "" != r.trim(p)) { for (var x = h.length; x > 0; x--) char_ = h.substr(x - 1, 1), o++, o % 3 == 0 && (char_ = p + char_), c = char_ + c; c.substr(0, 1) == p && (c = c.substring(1, c.length)), f = 0 == b ? c : c + m + s } return !k || 0 == h && 0 == s || (f = -1 != t.indexOf("-") && t.indexOf("+") < t.indexOf("-") ? "-" + f : S ? "+" + f : "" + f), "0" != f || "" != l && "undefined" != l && null != l || N && (a || (f = "")), "" != f && (d && (f = d + f), v && (f = f + "." + l), _ && (f += _)), f } function f(t) { if (-1 !== r.inArray(t.keyCode, [8, 9, 27, 13, 46, 110, 190]) || 65 == t.keyCode && t.ctrlKey === !0 || t.keyCode >= 35 && t.keyCode <= 39) { return } (t.shiftKey || t.keyCode < 48 || t.keyCode > 57) && (t.keyCode < 96 || t.keyCode > 105) && t.preventDefault() } function c() { var r = h.val(), t = a(r); r != t && h.val(t) } function o() { var r = h.val(); h.val(d + r) } function u() { var r = h.val(); h.val(r + _) } function l() { if ("" != r.trim(d) && x) { var t = h.val().split(d); h.val(t[1]) } } function s() { if ("" != r.trim(_) && y) { var t = h.val().split(_); h.val(t[0]) } } var h = r(this), v = /[0-9.]/, d = t.prefix, _ = t.suffix, m = t.centsSeparator, p = t.thousandsSeparator, g = t.limit, b = t.centsLimit, x = t.clearPrefix, y = t.clearSuffix, k = t.allowNegative, S = t.insertPlusSign, C = t.isDouble, N = t.isAllowNull, O = !1; S && (k = !0), r(this).bind("keydown.price_format", f), x && (r(this).bind("focusout.price_format", function () { l() }), r(this).bind("focusin.price_format", function () { o() })), y && (r(this).bind("focusout.price_format", function () { s() }), r(this).bind("focusin.price_format", function () { u() })), r(this).val().length > 0 && (c(), l(), s()) }) }, r.fn.unpriceFormat = function () { return r(this).unbind(".price_format") }, r.fn.unmask = function () { var t = r(this).val(), n = ""; for (var i in t) isNaN(t[i]) && "-" != t[i] || (n += t[i]); return n } }(jQuery);