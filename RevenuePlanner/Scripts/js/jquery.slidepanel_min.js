(function (e, t, n, r) { function s(t, n) { this.$element = t; this.options = e.extend({}, i, n); this._defaults = i; this.init() } var i = { orientation: "left", mode: "push", "static": false, event_def: "click" }; s.prototype.init = function () { var t = this; if (e("#slidepanel").length == 0) { var n = '<div id="slidepanel" class="cb_slide_panel"><div class="wrapper"><a href="#" class="close">Close</a><div class="inner"><div class="wrapper"></div></div></div></div>'; e(n).hide().appendTo(e("body")) } this.$panel = e("#slidepanel"); this.$body = e("body"); this.$body_position = this.$body.css("position"); this.$panel.hide().addClass("panel_" + this.options.orientation); this.$panel.data("slidepanel-current", false); this.$panel.data("slidepanel-loaded", false); this.$panel.css("left", "").css("right", "").css("top", "").css("bottom", ""); if (this.options.orientation == "left" || this.options.orientation == "right") { var r = {}; r["top"] = 0; r[this.options.orientation] = -this.$panel.width(); this.$panel.css(r) } if (this.options.orientation == "top" || this.options.orientation == "bottom") { var r = {}; r["left"] = 0; r[this.options.orientation] = -this.$panel.height(); this.$panel.css(r) } e(this.$element).on(this.options.event_def, function (e) { e.preventDefault(); if (t.options.static) { t.expand() } else { t.load() } }); e(".close-form", this.$panel).unbind(this.options.event_def); e(".close-form", this.$panel).click(function (e) { e.stopPropagation(); e.preventDefault(); t.collapse() }) }; s.prototype.load = function () { var t = this; if (this.$panel.data("slidepanel-current") == this.$element) { this.collapse(); return } else { this.expand(); var n = e(this.$element).attr("href"); if (this.$panel.data("slidepanel-loaded") !== n) { e(".inner .wrapper", this.$panel).html("").load(n, function () { t.$panel.removeClass("loading"); t.$panel.data("slidepanel-loaded", n) }) } else { this.$panel.removeClass("loading") } } this.$panel.data("slidepanel-current", this.$element) }; s.prototype.expand = function () { var e = this; var t = {}; var n = {}; t.visible = "show"; t[this.options.orientation] = 0; n[this.options.orientation] = this.options.orientation == "top" || this.options.orientation == "bottom" ? this.$panel.height() : this.$panel.width(); if (this.options.mode == "push") { this.$body.css("position", "absolute").animate(n, 250) } this.$panel.addClass("loading").animate(t, 250, function () { }) }; s.prototype.collapse = function () { var e = {}; var t = {}; e.visible = "hide"; e[this.options.orientation] = -(this.$panel.width() + 40); t[this.options.orientation] = 0; if (this.options.mode == "push") { this.$body.css("position", this.$body_position).animate(t, 250) } this.$panel.animate(e, 250).data("slidepanel-current", false) }; e.fn["slidepanel"] = function (t) { return this.each(function () { if (!e.data(this, "plugin_slidepanel")) { e.data(this, "plugin_slidepanel", new s(this, t)) } }) } })(jQuery, window)